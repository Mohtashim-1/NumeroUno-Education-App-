<style>
	.print-format {
		padding: 4mm;
		font-size: 8.0pt !important;
	}
	.print-format td {
		vertical-align:middle !important;
	}
	.table {
		width: 100%;
		border-collapse: collapse;
		margin-bottom: 20px;
	}
	.table th, .table td {
		border: 1px solid #000;
		padding: 6px;
		text-align: left;
		font-size: 8.0pt;
	}
	.table th {
		background-color: #f0f0f0;
		font-weight: bold;
		text-align: center;
	}
	.text-right {
		text-align: right;
	}
	.text-center {
		text-align: center;
	}
	.text-muted {
		color: #666;
	}
	.total-row {
		font-weight: bold;
		background-color: #f0f0f0;
	}
	.total-row td {
		border-top: 2px solid #000;
	}
</style>

<div id="header-html" class="hidden-pdf">
	{% if letterhead_content %}
	<div class="letter-head text-center">{{ letterhead_content | safe }}</div>
	<hr style="height:2px;border-width:0;color:black;background-color:black;">
	{% endif %}
</div>

<h2 class="text-center" style="margin-top:0">ACCOUNTS RECEIVABLE</h2>
<h4 class="text-center">
	{{ customer.customer_name }}
</h4>
<h6 class="text-center">
	{% if customer.tax_id %}
	{{ _("Tax Id: ") }}{{ customer.tax_id }}
	{% endif %}
</h6>
<h5 class="text-center">
	{{ doc.ageing_based_on or 'Due Date' }}
	{{ _("Until") }}
	{{ frappe.format(doc.to_date, 'Date') }}
</h5>

<table class="table table-bordered">
	<thead>
		<tr>
			<th style="width: 3%">#</th>
			<th style="width: 10%">{{ _("POSTING DATE") }}</th>
			<th style="width: 15%">{{ _("VOUCHER NO") }}</th>
			<th style="width: 10%">{{ _("DUE DATE") }}</th>
			<th style="width: 12%; text-align: right">{{ _("INVOICED AMOUNT") }}</th>
			<th style="width: 12%; text-align: right">{{ _("OUTSTANDING AMOUNT") }}</th>
			<th style="width: 8%; text-align: right">{{ _("AGE (DAYS)") }}</th>
			<th style="width: 20%">{{ _("CUSTOMER LPO") }}</th>
		</tr>
	</thead>
	<tbody>
		{% set row_num = 0 %}
		{% for row in data %}
		{% if row.posting_date or row.voucher_no %}
		{% set row_num = row_num + 1 %}
		<tr>
			<td class="text-center">{{ row_num }}</td>
			<td>{{ frappe.format(row.posting_date, 'Date') if row.posting_date else '' }}</td>
			<td>{{ row.voucher_no or '' }}</td>
			<td>{{ frappe.format(row.due_date, 'Date') if row.due_date else '' }}</td>
			<td style="text-align: right">{{ frappe.utils.fmt_money(row.invoiced, currency=currency) if row.invoiced else frappe.utils.fmt_money(0, currency=currency) }}</td>
			<td style="text-align: right">{{ frappe.utils.fmt_money(row.outstanding, currency=currency) if row.outstanding else frappe.utils.fmt_money(0, currency=currency) }}</td>
			<td style="text-align: right">{{ row.age if row.age else 0 }}</td>
			<td>{{ row.lpo_number or row.po_no or '' }}</td>
		</tr>
		{% endif %}
		{% endfor %}
		{% if has_data %}
		<tr class="total-row">
			<td></td>
			<td></td>
			<td></td>
			<td style="text-align: right"><b>{{ _("Total") }}</b></td>
			<td style="text-align: right"><b>{{ frappe.utils.fmt_money(total_invoiced, currency=currency) }}</b></td>
			<td style="text-align: right"><b>{{ frappe.utils.fmt_money(total_outstanding, currency=currency) }}</b></td>
			<td style="text-align: right"><b>{{ total_age }}</b></td>
			<td></td>
		</tr>
		{% else %}
		<tr>
			<td colspan="8" class="text-center" style="padding: 20px;">{{ _("No data available") }}</td>
		</tr>
		{% endif %}
	</tbody>
</table>

<p class="text-right text-muted">{{ _("Printed On ") }}{{ frappe.utils.now() }}</p> 