{% extends "templates/web.html" %}
{% block page_content %}

<h2>Assessment Results</h2>

{% if results %}
<table class="table table-bordered">
  <thead>
    <tr>
      <th>Assessment</th>
      <th>Score</th>
      <th>Total</th>
      {% if results[0].get("student") %}<th>Student</th>{% endif %}
      {% if results[0].get("show_download") %}<th>Download</th>{% endif %}
    </tr>
  </thead>
  <tbody>
    {% for result in results %}
    <tr>
      <td>{{ result.assessment_title }}</td>
      <td>{{ result.score }}</td>
      <td>{{ result.total }}</td>
      {% if result.get("student") %}<td>{{ result.student }}</td>{% endif %}
      {% if result.get("show_download") %}
        <td>
          <a href="/api/method/numerouno.api.download_certificate?name={{ result.name }}" target="_blank">Download Certificate</a>
        </td>
      {% endif %}
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>No results available.</p>
{% endif %}

{% endblock %}
